<!-- Copyright (C) 2016 NooBaa -->

<div class="row pad alt-bg">
    <div class="greedy">
        <input type="search"
            class="push-next"
            placeholder="Filter by conenction name"
            ko.textInput="ko.pc(filter, onFilterThrottled)" />
    </div>
    <button class="btn"
        ko.click="onAddConnection"
        ko.disable="connectionsLoading"
    >
        Add Connection
    </button>
</div>

<data-table class="greedy connections-table" params="
    columns: columns,
    data: rows,
    sorting: ko.pc(sorting, onSort, $component),
    loading: connectionsLoading,
    emptyMessage: emptyMessage,
    subRow: 'connectionUsage',
    expandColumn: 'isExpanded'
">
    <template name="connectionUsage">
        <div class="pad">
            <data-table class="column greedy usage-table" params="
                columns: usageColumns,
                data: rows,
                emptyMessage: emptyMessage
            ">
                <template name="noobaaBuckets">
                    <!-- ko ifnot: $data().href  -->
                    <span class="remark cell-tooltip"
                          ko.text="$data().text"
                          ko.tooltip="$data().tooltip"
                    ></span>
                    <!-- /ko -->
                    <!-- ko if: $data().href -->
                    <a class="link cell-tooltip"
                       ko.attr.href="$data().href"
                       ko.text="$data().text"
                       ko.tooltip="$data().tooltip"
                    ></a>
                    <!-- /ko -->
                </template>
            </data-table>
        </div>
    </template>
</data-table>

<paginator params="
    itemCount: connectionCount,
    pageSize: pageSize,
    page: ko.pc(page, onPage, $component)
"></paginator>

