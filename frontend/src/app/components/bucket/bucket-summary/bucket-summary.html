<!-- Copyright (C) 2016 NooBaa -->

<div class="fill row" ko.visible="!dataReady()">
    <loading-indicator class="align-middle greedy" params="label: true"></loading-indicator>
</div>

<div class="summary greedy row" ko.css.visible="dataReady">
    <section class="c3 column pad borders">
        <div class="row content-middle greedy" ko.if="state">
            <svg-icon class="push-next" params="name: state().icon.name"
                ko.css="state().icon.css"
                ko.tooltip="state().icon.tooltip"
            ></svg-icon>
            <span class="heading3 greedy" ko.text="state().text"></span>
        </div>
        <hr/>
        <div class="row content-middle greedy">
            <span class="c5 highlight push-next">Resources:</span>
            <span class="c7 text-right" ko.text="dataPlacement"></span>
        </div>
    </section>

    <section class="column c6 push-both">
        <div class="column align-middle greedy">
            <div class="row content-middle push-next-half">
                <h2 class="heading3 greedy push-next">Storage Availability</h2>
                <p class="remark content-middle">
                    <svg-icon class="icon-small" params="name: 'clock'"></svg-icon>
                    Updated: {{availablityTime}}
                </p>
            </div>
            <chart-legend class="avil-legend" params="
                items: availablity,
                format: 'size'
            "></chart-legend>

            <div class="greedy row">
                <bar class="align-middle" params="
                    values: availablity,
                    limits: availablityLimitsFormatter,
                    teeth: 5,
                    minRatio: 0,
                    markers: availablityMarkers,
                    width: 444
                "></bar>
            </div>
        </div>
    </section>

    <section class="c3 column">
        <div class="greedy borders pad column">
            <div class="row content-middle greedy">
                <!-- ko with: dataUsageChart -->
                <canvas class="bucket-chart push-next"
                    ko.tooltip="tooltip"
                    ko.css.disabled="disabled"
                    ko.canvas="$data"
                ></canvas>
                <!-- /ko -->
                <div class="column">
                    <p class="heading3" ko.text="dataOptimization"></p>
                    <p>
                        Data Optimization
                        <svg-icon class="icon-small push-prev-half"
                            params="name: 'question'"
                            ko.tooltip="dataUsageTooltip"
                        ></svg-icon>
                    </p>
                </div>
            </div>
            <hr />
            <div class="row content-middle greedy">
                <!-- ko with: rawUsageChart -->
                <pie-chart class="bucket-chart push-next"
                    ko.tooltip="tooltip"
                    ko.css.disabled="disabled"
                    params="
                        values: values,
                        showSum: false,
                        showValues: false,
                        enableHover: false,
                        radius: 30,
                        lineWidth: 8,
                        silhouetteColor: silhouetteColor
                    "
                ></pie-chart>
                <!-- /ko -->
                <div class="column">
                    <p class="heading3" ko.text="rawUsageLabel"></p>
                    <p>
                        Raw Usage
                        <svg-icon class="icon-small push-prev-half"
                            params="name: 'question'"
                            ko.tooltip="rawUsageTooltip"
                        ></svg-icon>
                    </p>
                </div>
            </div>
        </div>
    </section>
</div>
