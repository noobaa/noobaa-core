<!-- Copyright (C) 2016 NooBaa -->

<div class="fill row" ko.visible="!bucketLoaded()">
    <loading-indicator class="align-middle greedy" params="label: true"></loading-indicator>
</div>

<div class="summary greedy row" ko.css.visible="bucketLoaded">
    <section class="c3 column pad borders">
        <div class="row content-middle greedy">
            <svg-icon class="push-next" params="name: state().name" ko.css="state().css">
            </svg-icon>
            <span class="heading3 greedy" ko.text="state().tooltip"></span>
        </div>
        <hr/>
        <div class="row content-middle greedy">
            <span class="c5 highlight push-next">Data Placement:</span>
            <span class="c7 text-right" ko.text="dataPlacement"></span>
        </div>
    </section>

    <section class="column c6 push-both">
        <div class="row graphs greedy align-middle">
            <div class="column">
                <toggle-filter class="graph-selector align-start push-next-half" params="
                    options: viewOptions,
                    selected: ko.pc(selectedView, onSelectView, $component)
                "></toggle-filter>

                <chart-legend class="greedy"
                    ko.css="legendCss"
                    params="items: chartValues, format: 'size'"
                ></chart-legend>

                <!-- ko if: selectedView.eq('RAW_USAGE') -->
                <p class="row remark content-middle push-next">
                    <svg-icon class="icon-small push-next-half" params="name: 'clock'"></svg-icon>
                    Updated: {{lastRawUsageTime}}
                </p>
                <!-- /ko -->

                <!-- ko if: selectedView.eq('DATA_USAGE') -->
                <p class="row remark content-middle push-next">
                    <svg-icon class="icon-small push-next-half" params="name: 'clock'"></svg-icon>
                    Updated: {{lastDataUsageTime}}
                </p>
                <!-- /ko -->

                <!-- ko if: selectedView.eq('AVAILABILITY') -->
                <bar class="push-both align-start" params="
                    values: availablity,
                    limits: formatSize,
                    teeth: 5,
                    minRatio: 0,
                    markers: availablityMarkers,
                    width: 442
                "></bar>
                <!-- /ko -->
            </div>

            <!-- ko if: selectedView.eq('DATA_USAGE') -->
            <bar-chart class="align-end push-prev"
                ko.visibility="selectedView.eq('DATA_USAGE')"
                params="values: barChartData"
            ></bar-chart>
            <!-- /ko -->

            <!-- ko if: selectedView.eq('RAW_USAGE') -->
            <pie-chart class="align-end  push-prev" params="
                values: rawUsage,
                sumLabel: 'Total',
                format: 'size'
            "></pie-chart>
            <!-- /ko -->
        </div>
    </section>

    <section class="c3 column">
        <div class="greedy borders pad column">
             <p class="row greedy content-middle">
                <span class="c4 highlight">Bucket Quota:</span>
                <span class="c8 text-right" ko.text="bucketQuota"></span>
            </p>
            <hr>
             <p class="row greedy content-middle">
                <span class="c4 highlight">Cloud Sync:</span>
                <span class="c8 text-right" ko.text="cloudSyncStatus"></span>
            </p>
            <hr>
            <p class="row greedy content-middle">
                <span class="c4 highlight">Last Access:</span>
                <span class="c8 text-right" ko.text="lastAccess"></span>
            </p>
        </div>
    </section>
</div>
