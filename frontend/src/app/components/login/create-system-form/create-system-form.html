<!-- Copyright (C) 2016 NooBaa -->

<section class="row create-system-form">
    <div class="row pad left-box push-next">
        <div class="column align-middle">
            <svg-icon class="logo icon-xbig align-middle"
                params="name: 'logo'"
            ></svg-icon>

            <h1 class="heading1">Welcome to NooBaa</h1>
            <p>Two quick steps and we are ready to go</p>
        </div>
    </div>

    <div class="steps right-box column"
        ko.css="`step${step()}`"
    >
        <stepper class="pad content-box"
            params="steps: steps, current: step"
        ></stepper>

        <div class="row pad pages">
            <div class="page column"
                ko.css.selected="step() === 0"
            >
                <p class="heading3">Create your owner account</p>

                <editor params="label: 'Email address'">
                    <div class="row content-middle"
                        data-bind="validationOptions: { insertMessages: false }"
                    >
                        <input type="text"
                            placeholder="Your email address"
                            ko.disable="isEmailDisabled"
                            ko.value="email"
                            ko.hasFocus="true"
                        />

                        <svg-icon class="match-theme spin push-prev-half"
                            ko.visible="isEmailSpinnerVisible"
                            params="name: 'in-progress'"></svg-icon>
                    </div>
                   <span class="val-msg" data-bind="validationMessage: email"></span>
                </editor>

                <editor params="
                    label: 'Activation code',
                    tooltip: activationCodeTooltip
                ">
                    <div class="row content-middle">
                        <div class="row content-middle activation-code-field"
                            ko.validationOptions="{ insertMessages: false }"
                        >
                            <input type="text"
                                ko.disable="isActivationCodeDisabled"
                                placeholder="e.g. XXXXXX-YYYYYY"
                                ko.value="activationCode" />

                            <button class="link alt-colors no-focus-ring resend-btn"
                                tabindex="-1"
                                ko.tooltip="resendTooltip"
                                ko.enable="email.isValid"
                                ko.click="onResend"
                                ko.event.mouseenter="onResendEnter"
                            >
                                Resend
                            </button>
                        </div>

                        <svg-icon class="match-theme spin"
                            ko.visible="isActivationCodeSpinnerVisible"
                            params="name: 'in-progress'"
                        ></svg-icon>
                    </div>
                    <span class="val-msg" data-bind="validationMessage: activationCode"></span>
                </editor>

                <editor class="push-next" params="
                    label: 'Password',
                    insertValMessages: false,

                ">
                    <password-field ko.css.invalid="isPasswordInvalid" params="
                        value: password,
                        placeholder: 'Enter password',
                        strengthCalc: calcPasswordStrength
                    "></password-field>

                    <validation-rules-list params="field: password, highlightErrors: wasValidated">
                    </validation-rules-list>
                </editor>
            </div>

            <div class="page column" ko.css.selected="step() === 1">
                <p class="heading3">
                    Hi
                    <span ko.text="name"></span>
                    , let's configure your system
                </p>

                <editor params="label: 'NooBaa System name'">
                    <input type="text"
                        placeholder="Name your system"
                        ko.value="systemName" />
                </editor>

                <editor class="preview-only" params="label: 'Server DNS name'">
                    <div class="row content-middle"
                        data-bind="validationOptions: { insertMessages: false }"
                    >
                        <input type="text"
                            ko.value="serverDNSName" />

                        <svg-icon class="spin match-theme push-prev-half"
                            ko.visible="serverDNSName.isValidating"
                            params="name: 'in-progress'"
                        ></svg-icon>
                    </div>
                    <span class="val-msg" data-bind="validationMessage: serverDNSName"></span>
                    <p class="hint" ko.visible="serverDNSName.isValid">optional</p>
                </editor>

                <div class="greedy row">
                    <p class="remark align-end">
                        By clicking the Create system button, I accept NooBaa's
                        <a class="link"
                            target="_blank"
                            href="/public/eula">
                            Terms &amp; Conditions
                        </a>
                    </p>
                </div>
            </div>
        </div>

        <div class="row content-middle content-box pad">
            <p class="greedy highlight">
                Need any help?
                <a class="link" ko.attr.href="supportEmailHref">
                    Contact our support team
                </a>
            </p>
            <button class="link alt-colors push-next"
                ko.visible="isPrevVisible"
                ko.click="prev"
            >
                Previous
            </button>

            <button class="btn "
                ko.visible="isNextVisible"
                ko.click="next"
            >
                Next
            </button>

            <working-button ko.visible="isCreateSystemVisible"
                ko.shakeOnClick="shakeCreateBtn"
                params="
                    working: creatingSystem,
                    workingLabel: 'Creating...',
                    click: createSystem
                "
            >
                Create System
            </working-button>
        </div>
    </div>
</section>
