<!-- Copyright (C) 2016 NooBaa -->

<collapsible-section params="
    title: 'Peer to Peer Settings',
    collapsed: isCollapsed
">
    <section data-name="collapsed">
        <span data-bind="text: summaryLabel"></span>
        <span class="text-tech" data-bind="text: summaryValue"></span>
    </section>

    <section class="column" data-name="expanded">
        <p>
            Transport layer protocols, such as the Transmission Control Protocol (TCP) and User Datagram Protocol (UDP), specify a source and destination port number in their segment headers.
        </p>

        <div>
            <editor params="label: 'Configuration Type'">
                <radio-group params="options: portOptions, selected: portType"></radio-group>
            </editor>

            <!-- ko if: portType() === 'single' -->
            <editor params="label: 'Port Number'">
                <input type="number" min="0" data-bind="textInput: rangeMin"/>
            </editor>
            <!-- /ko -->

            <!-- ko if: portType() === 'range' -->
            <editor params="
                label: 'Port Range',
                insertValMessages: false
            ">
                <div class="row content-middle">
                    <input class="field" type="number" min="1" data-bind="
                        textInput: rangeMin
                    "/>
                    <span class="push-both"> - </span>
                    <input class="field" type="number" data-bind="
                        textInput: rangeMax,
                        attr: { min: rangeMin }
                    "/>
                </div>

                <span class="val-msg" data-bind="validationMessage: rangeMin">
                </span>
                <span class="val-msg" data-bind="validationMessage: rangeMax">
                </span>
            </editor>
            <!-- /ko -->
        </div>

        <p class="push-both">
            In order the guarantee node to node communication add the following exception to your Firewall/NAT:
        </p>

        <div class="alt-bg pad config push-next align-start">
            <span>
                <span class="highlight">Source:</span>
                <output class="text-tech">any</output>
            </span>

            <span>
                <span class="highlight">Destination:</span>
                <output class="text-tech">any</output>
            </span>

            <span>
                <span class="highlight">Protocol:</span>
                <output class="text-tech">TCP</output>
            </span>

            <span>
                <span class="highlight">Ports:</span>
                <output class="text-tech" data-bind="value: summaryValue"></output>
            </span>

            <span>
                <span class="highlight">Description:</span>
                <output class="text-tech">NooBaa</output>
            </span>
        </div>

        <div class="push-both remark">
            <span> Please note </span>
            <ul class="bullet-list">
                <li>TCP ports should be manually opened in firewalls/NATs in order to be reachable</li>
                <li>Connections are secured using SSL</li>
                <li>In any case if TCP will not be reachable, UDP will be used as fallback, which is capable of bypassing firewalls/NATs, assuming UDP is allowed in your network</li>
            </ul>
        </div>

        <button class="btn align-start push-prev" data-bind="
            click: update,
            shakeOnClick: errors().length,
        ">
            Update
        </button>
    </section>
</collapsible-section>
