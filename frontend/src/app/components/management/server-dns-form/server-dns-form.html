<!-- Copyright (C) 2016 NooBaa -->

<collapsible-section params="
    title: 'System DNS Name / Address',
    collapsed: isCollapsed
">
    <section data-name="collapsed">
        <p>
            Server Address:
            <output class="text-tech" ko.text="serverAddress"></output>
        </p>
    </section>

    <section class="column" data-name="expanded">
        <p class="push-next">
            Domain Name System: The Internet's system for converting alphabetic names into numeric addresses.
        </p>

        <div class="column push-next">
            <editor params="label: 'System Address'">
                <radio-group params="selected: addressType, options: addressOptions"></radio-group>
            </editor>

            <editor params="label: 'IP Address'" ko.visible="usingIP">
                <input type="text" disabled ko.value="ipAddress" />
            </editor>

            <editor ko.visible="usingDNS" params="
                label: 'DNS Name',
            ">
                <div class="row content-middle"
                    data-bind="validationOptions: { insertMessages: false }"
                >
                        <input type="text" ko.textInput="dnsName" />
                        <svg-icon class="spin push-prev-half"
                            ko.visible="dnsName.isValidating"
                            params="name: 'in-progress'"></svg-icon>
                </div>
                <span class="val-msg" data-bind="validationMessage: dnsName"></span>
                <p class="highlight push-both">
                    Before clicking the update button follow the following procedure:
                </p>

                <ol class="bullet-list">
                    <li>
                        Add the new name in your DNS to have both the old and new names available
                        <div class="alt-bg pad config">
                            <span>
                                <span class="highlight">IP:</span>
                                <output class="text-tech" ko.value="ipAddress"></output>
                            </span>

                            <span>
                                <span class="highlight">Name:</span>
                                <span class="text-tech" ko.text="dnsName"></span>
                            </span>
                        </div>
                    </li>
                    <li>
                        Click the update button
                    </li>
                    <li>
                        After 24 hours the old name can be removed from your DNS
                    </li>
                </ol>
            </editor>
        </div>

        <p class="row remark">
            <svg-icon class="icon-small" params="name: 'notif-info'">
            </svg-icon>
            <span class="greedy">
                In any case, reinstalling a node (from the install node wizard) will update the server address used by that node. Make sure that the server IP was configured Static and no DHCP, otherwise if the IP will suddenly change the nodes will lose connectivity.
            </span>
        </p>

        <button class="btn align-start push-both"
            ko.click="update"
            ko.shakeOnClick="errors().length"
        >
            update
        </button>
    </section>
</collapsible-section>
