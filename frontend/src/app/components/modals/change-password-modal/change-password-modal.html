<!-- Copyright (C) 2016 NooBaa -->

<managed-form class="column greedy" params="
    name: formName,
    fields: formFields,
    onValidate: onValidate,
    onValidateSubmit: onValidateSubmit,
    onSubmit: onSubmit
">
    <div class="column greedy pad">
        <h2 class="heading3">{{heading}}</h2>

        <editor params="label: 'Current password'">
            <password-field
                ko.validationCss="$form.password"
                params="
                    value: $form.password,
                    hasFocus: true
                "
            ></password-field>
            <validation-message params="field: $form.password"></validation-message>
        </editor>

        <editor params="
            label: 'New password',
            insertValMessages: false
        ">
            <password-field
                ko.validationCss="$form.newPassword"
                params="
                    value: $form.newPassword,
                    strengthCalc: calcPasswordStrength
                "
            ></password-field>

            <ul class="restriction-list"
                ko.foreach="passwordRestrictionList"
            >
                <li ko.text="label" ko.css="css"></li>
            </ul>
        </editor>
    </div>

    <div class="column pad content-box">
        <div class="row content-middle align-end">
            <button class="link alt-colors push-next"
                ko.click="onCancel"
            >
                Cancel
            </button>
            <working-button ko.shakeOnClick="!$form.isValid()" params="
                click: $form.submit,
                working: $form.isSubmitting,
                workingLabel: 'Applying...'
            ">
                Change Password
            </working-button>
        </div>
    </div>
</modal>
