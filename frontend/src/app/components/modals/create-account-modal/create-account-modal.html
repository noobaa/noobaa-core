<!-- Copyright (C) 2016 NooBaa -->

<form class="column greedy">
    <new-wizard class="column greedy" params="
        steps: steps,
        step: form.step,
        actionLabel: 'Create',
        disabled: form.isLocked,
        onBeforeStep: onBeforeStep.bind($component),
        onComplete: form.submit,
        onCancel: close.bind($component)
    ">
        <section class="column greedy">
            <editor params="label: 'Login Access'">
                <toggle-switch params="
                    value: form.hasLoginAccess,
                    onLabel: 'Enabled',
                    offLabel: 'Disabled'
                "></toggle-switch>
                <p class="remark push-prev-half">
                    Enabling login access will generate a password that allows login to <br>
                    NooBaa management  console as a system admin
                </p>
            </editor>

            <editor params="label: accountNameLabel">
                <input type="text"
                    ko.validationCss="form.accountName"
                    ko.value="form.accountName"
                    ko.attr.placeholder="accountNamePlaceholder"
                />
                <p class="remark" ko.visible="isAccountNameRemarkVisible">
                    3 - 32 characters
                </p>
                <validation-message params="field: form.accountName"></validation-message>
            </editor>
        </section>

        <section class="column greedy">
            <editor params="label: 'S3 Access', disabled: form.isLocked">
                <toggle-switch params="
                    value: form.hasS3Access,
                    onLabel: 'Enabled',
                    offLabel: 'Disabled',
                    disabled: form.isLocked
                "></toggle-switch>
                <p class="remark push-prev-half" ko.css.disabled="form.isLocked">
                    Granting S3 access will allow this account to connect S3 client <br>
                    applications by generating security credentials (key set).
                </p>
                <validation-message params="field: form.hasS3Access"></validation-message>
            </editor>

            <editor params="label: 'S3 default placement', disabled: !form.hasS3Access() || form.isLocked()">
                <div class="row">
                    <dropdown params="
                        options: resourceOptions,
                        selected: form.defaultResource,
                        disabled: !form.hasS3Access() || form.isLocked(),
                        placeholder: 'Choose Resources',
                        invalid: form.defaultResource.isInvalidTouched,
                    ">
                    </dropdown>
                    <svg-icon class="icon-small push-prev-half align-middle"
                        params="name: 'question'"
                        ko.tooltip="s3PlacementToolTip"
                    >
                    </svg-icon>
                </div>
                 <validation-message params="field: form.defaultResource"></validation-message>
            </editor>

            <radio-group class="push-prev-half" params="
                options: bucketPermissionModes,
                selected: form.hasAccessToAllBuckets,
                multiline: true,
                disabled: !form.hasS3Access() || form.isLocked()
            "></radio-group>

            <div class="align-end push-next-half" ko.css.disabled="isBucketSelectionDisabled">
                <button class="link alt-colors"
                    ko.click="onSelectAllBuckets"
                    ko.disable="isBucketSelectionDisabled"
                ">
                    Select all
                </button>
                |
                <button class="link alt-colors"
                    ko.click="onClearSelectedBuckets"
                    ko.disable="isBucketSelectionDisabled"
                >
                    Clear
                </button>
            </div>

            <multiselect class="push-next greedy" params="
                options: bucketOptions,
                selected: form.allowedBuckets,
                disabled: isBucketSelectionDisabled
            "></multiselect>
        </section>
    </new-wizard>
</form>
