<!-- Copyright (C) 2016 NooBaa -->

<managed-form class="column greedy" params="
    name: formName,
    fields: fields,
    onValidate: values => onValidate(values, existingNames),
    onWarn: values => onWarn(values, regionByResource),
    onSubmit: onSubmit
">
    <wizard class="column greedy" params="
        steps: steps,
        step: $form.step,
        actionLabel: 'Create',
        onBeforeStep: onBeforeStep,
        onComplete: $form.submit,
        onCancel: onCancel,
        renderControls: false
    ">
        <section class="column greedy">
             <editor class="push-prev greedy" params="label: 'Bucket Name'">
                <input type="text"
                        class="push-next-half"
                        placeholder="Type here"
                        ko.textInput="$form.bucketName"
                        ko.hasFocus="true"
                />
                <ul class="name-validation-list" ko.foreach="nameRestrictionList">
                    <li ko.text="label" ko.css="css"></li>
                </ul>
            </editor>
            <div class="row content-middle page-footer">
                <p class="remark greedy">
                    <svg-icon params="name: 'notif-info'" class="icon-small"></svg-icon>
                    <span>The bucket name cannot be changed after creation</span>
                </p>
                <wizard-controls></wizard-controls>
            </div>
        </section>

        <section class="column greedy">
            <div class="push-next">
                <h2 class="heading3">Policy Type</h2>
                <!-- ko foreach: policyTypeOptions -->
                <div class="row content-middle option-row">
                    <radio-btn params="
                        group: 'policy-type',
                        value: policyType,
                        selected: $form.policyType,
                        label: label,
                        hasFocus: $index() == 0
                    "></radio-btn>
                    <span class="push-both-half">|</span>
                    {{description}}
                    <svg-icon class="icon-small push-prev-half"
                        ko.tooltip="tooltip"
                        params="name: 'question'"
                    ></svg-icon>
                </div>
                <!-- /ko -->
            </div>
            <div class="column greedy push-next">
                 <div class="row content-middle push-next-half">
                    <h2 class="heading3 greedy push-next">
                        Resources in Policy
                    </h2>
                    <div>
                        <button type="button" class="link alt-colors" ko.click="onSelectAll">
                            Select all
                        </button>
                        |
                        <button type="button" class="link alt-colors" ko.click="onClearAll">
                            Clear all
                        </button>
                    </div>
                </div>
                <data-table class="resource-table greedy" params="
                    columns: resourceColumns,
                    data: resourceRows,
                    rowCssProp: 'disabledCss'
                ">
                </data-table>
                <validation-message params="field: $form.selectedResources"></validation-message>
            </div>
            <div class="row content-middle page-footer">
                <p class="remark greedy">
                    <svg-icon params="name: 'notif-info'" class="icon-small"></svg-icon>
                    <span>To create a new resource go to ></span>
                    <a class="link" ko.attr.href="resourcesHref">Resources</a>
                </p>
                <wizard-controls></wizard-controls>
            </div>
        </section>
    </wizard>
</managed-form>
