<!-- Copyright (C) 2016 NooBaa -->

<managed-form class="column greedy" params="
    name: formName,
    fields: fields,
    onValidate: onValidate,
    onSubmit: onSubmit
">
    <section class="column push-next">
        <h2 class="heading3">Policy Type</h2>

        <div class="row content-middle option-row">
            <radio-btn params="
                group: 'policy-type',
                value: 'SPREAD',
                selected: $form.policyType,
                label: 'Spread',
                hasFocus: true
            "></radio-btn>
            <span class="push-both-half">|</span>
            Spreading the data across the chosen resources
        </div>

        <div class="row content-middle option-row">
            <radio-btn params="
                group: 'policy-type',
                value: 'MIRROR',
                selected: $form.policyType,
                label: 'Mirror'
            "></radio-btn>
            <span class="push-both-half">|</span>
            Full duplication of the data in each chosen resource
        </div>
    </section>

    <section class="column greedy push-next">
         <div class="row content-middle push-next-half">
            <h2 class="heading3 greedy push-next">
                Resources in Policy
            </h2>
            <div>
                <button class="link alt-colors" ko.click="onSelectAll">
                    Select all
                </button>
                |
                <button class="link alt-colors" ko.click="onClearAll">
                    Clear all
                </button>
            </div>
        </div>
        <data-table class="resource-table greedy" params="
            columns: columns,
            data: rows,
            rowCssProp: 'disabledCss'
        ">
        </data-table>
        <validation-message params="field: $form.selectedResources"></validation-message>
    </section>

    <div class="row content-middle">
        <p class="remark greedy push-next">
            <svg-icon class="icon-small valign-bottom"
                params="name: 'notif-info'"
            ></svg-icon>
            To create a new resource go to
            <a class="link" ko.attr.href="resourcesHref">
                Resources
            </a>
        </p>
        <button type="button" class="link alt-colors push-next" ko.click="onCancel">
            Cancel
        </button>
        <button class="btn" ko.shakeOnClick="!$form.isValid()">
            Save
        </button>
    </div>
</managed-form>
