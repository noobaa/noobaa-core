<!-- Copyright (C) 2016 NooBaa -->

<div class="greedy column">
    <editor params="label: 'Bucket Quota'">
        <toggle-switch params="
            value: isUsingQuota,
            onLabel: 'Enabled',
            offLabel: 'Disabled'
        "></toggle-switch>
    </editor>

    <editor params="label: 'Set Limit', disabled: !isUsingQuota(), insertValMessages: false">
        <div class="row">
            <input type="number" min="0"
                class="push-next"
                ko.enable="isUsingQuota"
                ko.value="quotaSize"
                ko.hasFocus="true"
            />

            <dropdown class="size-unit" params="
                options: unitOptions,
                disabled: !isUsingQuota(),
                selected: quotaUnit
            "></dropdown>
        </div>
        <div class="val-msg" data-bind="validationMessage: quotaSize"></div>
    </editor>

    <bar class="push-prev align-start" ko.css.disabled="!isUsingQuota()" params="
        values: barValues,
        teeth: 5,
        limits: formatBarLabel,
        width: 500,
        minRatio: 0,
        markers: [quotaMarker()]
    "></bar>

    <chart-legend class="legend-row"
        params="items: barValues, format: 'size'"
        ko.css.disabled="!isUsingQuota()"
    ></chart-legend>
</div>

<div class="row content-middle">
    <p class="remark greedy row push-next">
        <svg-icon class="icon-small push-next-half" params="name: 'notif-info'"></svg-icon>
        When a quota is not set the bucket will utilize all its available resources.
    </p>
    <button class="link alt-colors push-both" ko.click="onCancel">
        Cancel
    </button>
    <button class="btn" ko.click="onSave" ko.shakeOnClick="errors().length">
        Save
    </button>
</div>
