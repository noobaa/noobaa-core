<!-- Copyright (C) 2016 NooBaa -->

<section class="column greedy">
    <h2 class="heading3">
        Set connection
    </h2>

    <editor params="label: 'Target Connection'">
        <dropdown params="
                placeholder: 'Choose a connection',
                actions: connectionActions,
                options: connectionOptions,
                selected: connection,
                hasFocus: true
            "
            ko.css.invalid="connection.isModified() && !connection.isValid()"
        ></dropdown>
        <div class="val-msg" ko.validationMessage="connection"></div>
    </editor>

    <editor params="label: 'Target Bucket', disabled: !targetBucketsOptions()">
        <dropdown params="
                filter: true,
                placeholder: 'Choose Bucket',
                disabled: !targetBucketsOptions(),
                options: targetBucketsOptions,
                loading: fetchingTargetBucketsOptions,
                selected: targetBucket,
            "
            ko.css.invalid="targetBucket.isModified() && !targetBucket.isValid()"
        ></dropdown>
        <div class="val-msg" ko.validationMessage="targetBucket"></div>
    </editor>

    <h2 class="heading3 push-prev">
        Configure policy
    </h2>
    <div class="direction-line" ko.css.disabled="!targetBucket()">
        Source:
        <span ko.text="bucketName"></span>
        <svg-icon
            class="icon-small left"
            params="name: leftSymbol">
        </svg-icon><svg-icon
            class="icon-small right"
            params="name: rightSymbol"></svg-icon>
        </span>
        Target:
        <span ko.text="targetBucketName"></span>
    </div>

    <editor params="
        label: 'Sync Bucket Every',
        disabled: !targetBucket(),
        insertValMessages: false
    ">
            <div class="row">
                <input class="push-next" type="Number"  min="1"
                    ko.value="frequency"
                    ko.enable="targetBucket"/>
                <dropdown class="freq-unit" params="
                    selected: frequencyUnit,
                    options: frequencyUnitOptions,
                    disabled: !targetBucket()
                "></dropdown>
            </div>
            <span class="val-msg" ko.validationMessage="frequency"></span>
    </editor>

    <editor params="
        label: 'Sync Type',
        disabled: !targetBucket(),
        insertValMessages: false
    ">
        <radio-group params="
            selected: direction,
            options: directionOptions,
            disabled: !targetBucket()
        "></radio-group>
    </editor>

    <checkbox  params="
        label: 'Synchronize File Deletions',
        checked: syncDeletions,
        disabled: !targetBucket() || direction() === 3
    "></checkbox>
</section>

<div class="row content-middle align-end">
    <button class="link alt-colors push-next" ko.click="cancel">
        Cancel
    </button>
    <button class="btn"
        ko.click="save"
        ko.shakeOnClick="errors().length">
        Save
    </button>
</div>
