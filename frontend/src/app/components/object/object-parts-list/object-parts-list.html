<!-- Copyright (C) 2016 NooBaa -->

<div class="row content-middle alt-bg pad">
    <div class="column greedy push-next">
        <h3 class="heading3">
            Part count for this object:
            {{partCount}}
        </h3>
        <span class="row">
            Object\'s bucket policy: {{placementType}}
            <vr class="alt-colors push-both-half"></vr>
            Data resiliency type: {{resilinecySummary}}
            <vr class="alt-colors push-both-half"></vr>
            Number of resources: {{resourceCount}}
        </span>
    </div>

    <div class="column push-next" ko.tooltip="downloadTooltip">
        <a class="btn" download
            ko.css.disabled="!areActionsAllowed()"
            ko.click="onDownloadClick"
            ko.attr.href="s3SignedUrl" >
            Download Object
        </a>
    </div>

    <div ko.tooltip="previewTooltip">
        <button class="btn"
            ko.disable="!areActionsAllowed()"
            ko.click="onPreviewFile">
            Preview Object
        </button>
    </div>
</div>

<loading-indicator class="align-middle greedy push-prev"
    ko.visible="!partsLoaded()"
></loading-indicator>

<div class="row greedy no-overflow"
    ko.css.expanded="isPaneExpanded"
    ko.visible="partsLoaded"
>
    <ul class="part-list greedy list-no-style column" ko.foreach="rows">
        <li class="row content-middle border-bottom part-row"
            ko.css.selected="isSelected"
            ko.click="onMoreDetails"
        >
            <div class="row content-middle part-summary">
                <svg-icon class="push-next-half"
                    ko.css="state().css"
                    ko.tooltip="state().tooltip"
                    params="name: state().name"
                ></svg-icon>
                <span class="greedy" ko.text="summary"></span>
                <a class="link alt-colors more-details-btn" href="#">
                    More Details
                </a>
            </div>
        </li>
    </ul>

    <section class="column details-pane">
        <div class="column greedy hpad no-wrap" ko.with="partDetails">
            <div class="row content-middle">
                <h2 class="heading3 greedy push-next">Part {{partSeq}} Distribution Details</h2>
                <button class="icon-btn no-outline" ko.click="onX">
                    <svg-icon class="icon-small" params="name: 'x'"></svg-icon>
                </button>
            </div>
            <hr />
            <div class="greedy block-tables"
                ko.css.fade="fade"
                ko.event.animationend="onAnimationEnd"
                ko.foreach="blockTables"
            >
                <section class="column">
                    <div class="row content-middle push-next-half">
                        <p class="row greedy push-next content-middle">
                            <span class="highlight push-next-half">{{label}}:</span>
                            {{policy}}
                            <!-- ko if: resources -->
                            | Resides on
                            <!-- ko if: resources().href -->
                            <a class="box row content-middle cursor-pointer" ko.attr.href="resources().href">
                                <svg-icon class="icon-small highlight push-next-half" params="name: resources().icon">
                                </svg-icon>
                                {{resources().text}}
                            </a>
                            <!-- /ko -->
                            <!-- ko ifnot: resources().href -->
                            <span class="box row content-middle" ko.tooltip="resources().tooltip">
                                <svg-icon class="icon-small highlight push-next-half"
                                    ko.visible="resources().icon"
                                    params="name: resources().icon"
                                ></svg-icon>
                                {{resources().text}}
                            </span>
                            <!-- /ko -->
                            <!-- /ko -->
                        </p>
                        <svg-icon class="icon-small"
                            ko.visible="tooltip().text"
                            ko.tooltip="tooltip"
                            params="name: 'question'"
                        ></svg-icon>
                    </div>

                    <data-table class="alt-bg" params="
                        columns: columns,
                        visibleColumns: visibleColumns,
                        data: rows,
                    ">
                        <template name="marking">
                            <span class="box"
                                ko.text="$data().text"
                                ko.tooltip="$data().tooltip"
                            ></span>
                        </template>
                    </data-table>
                </section>
            </div>
        </div>
    </section>
</div>

<paginator params="
    page: ko.pc(page, onPage.bind($component)),
    itemCount: partCount,
    pageSize: pageSize
"></paginator>
