#!groovyâ€‹
node('node2') {
    stage('GetTestFromGit') {
        echo 'Checkouting from git!'
        checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'bb9a113a-8e3d-49b7-abd7-7ae1fb4d452b', url: 'https://github.com/noobaa/noobaa-core']]])
    }
   stage('RunDataSet') {
      // Run the maven build
      echo 'Running some dataSet!'
      sh '''
        export NVM_DIR=/usr/local/nvm
        . /opt/nvm/nvm.sh
        npm install bluebird;
        npm install lodash;
        node $WORKSPACE/src/test/qa/dataset.js --server 13.92.133.78
      '''
   }
}
